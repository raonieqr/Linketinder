(()=>{"use strict";var e={531:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function l(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const l=n(644),c=r(n(654)),u=document.getElementById("modal"),d=document.getElementById("behind-modal"),s=document.getElementById("register-c"),p=document.getElementById("show-profile-c"),v=document.getElementById("exitModal");s&&s.addEventListener("click",(function(){window.location.href="./candidate_registration.html"})),p&&p.addEventListener("click",(function(){u&&(u.style.display="flex"),d&&d.classList.add("modalBlur")})),v&&v.addEventListener("click",(function(){u&&(u.style.display="none"),d&&d.classList.remove("modalBlur")}));const f=document.getElementById("sigIn");f&&f.addEventListener("click",(function(){let e=localStorage.getItem("candidateLocal"),t=c.getInput("userName"),n=c.getInput("userPass");if(!e||!t||!n)return void alert("Error: campo vazio");const i=JSON.parse(e);c.isLoginValid(i,t.value,n.value)?window.location.href="./candidate_profile.html":alert("Error: login ou senha inválido")}));const m=document.getElementById("register");m&&m.addEventListener("click",(function(){(function(){if(function(){const e=c.getInput("name"),t=c.getInput("email"),n=c.getInput("skills"),i=c.getInput("age"),a=c.getInput("cpf"),r=c.getInput("cep"),o=c.getInput("password"),l=c.getInput("description");if(c.isEmpty(e)||c.isEmpty(t)||c.isEmpty(n)||c.isEmpty(i)||c.isEmpty(a)||c.isEmpty(r)||c.isEmpty(o)||c.isEmpty(l))return alert("Error: Nenhum campo pode estar vazio"),!1;const u=c.validateInput(e,"nome")&&c.validateCpf(a)&&c.validateAge(i)&&g&&c.validateDescription(l)&&c.validateEmail(t);return!!c.validatePasswordLength(o)&&u}()){const t=c.getInput("name"),n=c.getInput("email"),i=c.getInput("skills"),a=c.getInput("age"),r=c.getInput("cpf"),o=c.getInput("cep"),l=c.getInput("password"),u=c.getInput("description"),d=c.parseSkillsInput(i);if(!(t&&n&&i&&a&&r&&o&&l&&u))return alert("Error: campo vazio"),!1;const s={name:t.value,age:parseInt(a.value,10),email:n.value,skills:Array.from(d).join().toLowerCase().trim().split(/[;, ]+/),description:u.value,cpf:r.value,cep:parseInt(o.value,10),password:l.value,applications:null};return e=s,fetch("http://localhost:8080/Linketinder/registerCandidate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>{if(200!==e.status)throw new Error("Request Error");alert("Cadastro realizado!")})).then((e=>{alert(e)})).catch((e=>{alert(e.message)})),localStorage.setItem("candidateLocal",JSON.stringify(s)),!0}var e;return!1})()&&(window.location.href="./candidate_profile.html")}));var g=!1;const h=c.getInput("cep");function y(e){if(e.hasOwnProperty("erro"))return function(){let e=document.getElementById("neighborhood"),t=document.getElementById("uf");e&&t&&(e.value="",t.value="")}(),alert("Error: CEP não encontrado."),!1;{let t=document.getElementById("neighborhood"),n=document.getElementById("uf");if(t&&n)return t.value=e.bairro,n.value=e.uf,!0}}function E(){const e=localStorage.getItem("companyLocal"),t=localStorage.getItem("candidateLocal"),n=document.querySelector(".grid");if(!e||!t)return;const i=JSON.parse(e),a=JSON.parse(t);if(!i.vacancy||!i.vacancy.skills||!a.skills)return;const r=i.vacancy.skills.filter((e=>a.skills.includes(e)));if(n){var o=r.length/i.vacancy.skills.length*100;n.innerHTML=` <div id="vacancies">\n      <div class="vacancies-detail">\n        <div class="title">\n          <h3 id="titleVacancy">${i.vacancy.name}</h3>\n          <p id="dateVacancy">${i.vacancy.date}</p>\n        </div>\n        <p id="match">Match: ${o.toFixed(2).toString()}%</p>\n        \x3c!-- <i class="ph-fill ph-heart"></i> --\x3e\n      </div>\n    </div>`}}h&&h.addEventListener("focusout",(()=>o(void 0,void 0,void 0,(function*(){g=yield(0,l.lookupCEPAndProcessResponse)(y)})))),E(),document.addEventListener("DOMContentLoaded",(function(){let e=document.getElementById("vacancyLink");e&&e.addEventListener("click",(function(){E()}))})),function(){let e=document.querySelector("tbody"),t=document.querySelector("tbody tr"),n=document.querySelector("table"),i=document.createElement("td"),a=document.createElement("td"),r=document.createElement("td"),o=localStorage.getItem("companyLocal");if(o)var l=JSON.parse(o);l.vacancy&&(i.innerText=l.vacancy.name,a.innerText="x",r.innerText=l.vacancy.skills,null==t||t.appendChild(i),null==t||t.appendChild(a),null==t||t.appendChild(r),t&&e&&(null==e||e.appendChild(t),null==n||n.appendChild(e)))}()},644:function(e,t,n){var i=this&&this.__createBinding||(Object.create?function(e,t,n,i){void 0===i&&(i=n);var a=Object.getOwnPropertyDescriptor(t,n);a&&!("get"in a?!t.__esModule:a.writable||a.configurable)||(a={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,i,a)}:function(e,t,n,i){void 0===i&&(i=n),e[i]=t[n]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return a(t,e),t},o=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function l(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,l)}c((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.lookupCEPAndProcessResponse=void 0;const l=r(n(654));t.lookupCEPAndProcessResponse=function(e){return o(this,void 0,void 0,(function*(){const t=l.getInput("cep");if(t&&l.validateCep(t)){const n="https://viacep.com.br/ws/"+t.value+"/json/";try{const t=yield fetch(n);if(t.ok){const n=yield t.json();if(e(n))return!0}}catch(e){alert("Error: CEP não encontrado.")}}return!1}))}},654:(e,t)=>{function n(e){return/^\d+$/.test(e)}function i(e){return/[/[0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/.test(e)}function a(e){return/\S+@\w+\.\w{2,6}(\.\w{2})?/g.test(e)}function r(e){return alert(e),!1}Object.defineProperty(t,"__esModule",{value:!0}),t.getInput=t.isLoginValid=t.parseSkillsInput=t.validateCnpj=t.validatePasswordLength=t.isEmpty=t.validateDescription=t.validateEmail=t.validateCep=t.validateAge=t.validateCpf=t.validateInput=t.showAlert=t.validationEmail=t.isSpecialCharacter=t.isDigit=void 0,t.isDigit=n,t.isSpecialCharacter=i,t.validationEmail=a,t.showAlert=r,t.validateInput=function(e,t){return i(e.value)||n(e.value)?r(`Error: ${t} inválido`):e.value},t.validateCpf=function(e){return n(e.value)&&11===e.value.length?e.value:r("Error: cpf inválido")},t.validateAge=function(e){return n(e.value)?e.value:r("Error: idade inválida")},t.validateCep=function(e){return!(!n(e.value)||8!==e.value.length)||r("Error: cep inválido")},t.validateEmail=function(e){return n(e.value)||!a(e.value)?r("Error: email inválido"):e.value},t.validateDescription=function(e){return n(e.value)||e.value.length<10?r("Error: descrição inválida"):e.value},t.isEmpty=function(e){return""===e.value.trim()},t.validatePasswordLength=function(e){return!(e&&e.value.length<8&&(r("Error: senha muito curta"),1))},t.validateCnpj=function(e){return n(e.value)&&14===e.value.length?e.value:r("Error: cnpj inválido")},t.parseSkillsInput=function(e){const t=new Set;if(e&&e.value){const n=e.value.split(/[, ]+/);for(const e of n)t.add(e)}return t},t.isLoginValid=function(e,t,n){return e.name===t&&e.password===n},t.getInput=function(e){return document.getElementById(e)}}},t={};!function n(i){var a=t[i];if(void 0!==a)return a.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(531)})();